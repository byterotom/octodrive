services:

  desktop:
    image: octodrive:latest
    networks:
      - octo-net
    environment:
      # Display piping
      - DISPLAY=${DISPLAY}
      # This is to resolve the gsettings file not found warning
      - GSETTINGS_BACKEND=memory
    volumes:
      # X11 mounting
      - /tmp/.X11-unix:/tmp/.X11-unix
      - .:/root/app
    command: ["./build/bin/octodrive"]

  server:
    image: alpine:latest
    networks:
      - octo-net
    working_dir: /root/app
    volumes:
      - ./server/bin:/root/app/bin
    command: ["./bin/server"]
    

networks:
  octo-net:
    driver: bridge